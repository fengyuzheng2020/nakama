## 数据库部署
cockroach

curl https://binaries.cockroachdb.com/cockroach-v24.3.0.linux-amd64.tgz -o cockroach-v24.3.0.linux-amd64.tgz
1. 下载 CockroachDB v24.3 二进制文件
   首先，下载 CockroachDB v24.3 版本的二进制文件。运行以下命令来获取该版本的 tar 包：

bash
复制代码
curl https://binaries.cockroachdb.com/cockroach-v24.3.0.linux-amd64.tgz -o cockroach-v24.3.0.linux-amd64.tgz
2. 解压二进制文件
   下载完成后，解压下载的 tar 包：

bash
复制代码
tar -xzvf cockroach-v24.3.0.linux-amd64.tgz
这将解压出一个名为 cockroach-v24.3.0.linux-amd64 的文件夹。

3. 移动 Cockroach 二进制文件到系统路径
   进入解压后的文件夹，并将 cockroach 二进制文件移动到系统的 /usr/local/bin 目录，以便系统全局访问：

bash
复制代码
sudo mv cockroach-v24.3.0.linux-amd64/cockroach /usr/local/bin/
4. 验证安装
   验证安装是否成功，运行以下命令查看 CockroachDB 的版本：


```shell
cockroach version
```

如果安装成功，您将看到类似于以下的输出：

```shell
CockroachDB v24.3.0 (v24.3.0) : linux amd64 (x86_64-unknown-linux-gnu)
```



创建组：

```shell
sudo groupadd cockroach
```

创建用户并添加到组：
```shell
sudo useradd -r -m -g cockroach cockroach
```


sudo vi /etc/systemd/system/cockroach.service

文件内容
```
[Unit]
Description=CockroachDB
After=network.target

[Service]
ExecStart=/usr/local/bin/cockroach start-single-node --insecure --listen-addr=0.0.0.0:26257 --http-addr=0.0.0.0:26258 --store=path=/data/cockroach-data
User=cockroach
Group=cockroach

[Install]
WantedBy=multi-user.target
```

启动服务

sudo systemctl daemon-reload
sudo systemctl start cockroach
sudo systemctl restart cockroach
sudo systemctl enable cockroach

/usr/local/bin/cockroach start-single-node --insecure --store=/www/server/cockroach/cockroach-data --listen-addr=0.0.0.0:26257 --http-addr=0.0.0.0:8080

## 构建

go build -trimpath -mod=vendor

./nakama --version
## 控制台
http://8.155.3.46:7351/

账号 admin
密码 QD8qREoc0vNn

## 初始化数据库

./nakama migrate up --database.address "root@120.46.95.88:26257"


## 拉取
git remote set-url origin https://fengyuzheng2020:xxx@github.com/fengyuzheng2020/nakama.git

git clone https://fengyuzheng2020:xx@github.com/fengyuzheng2020/nakama.git


## 排行榜相关
1、排行榜创建后nakama console 不显示，需要重启nakama服务器
